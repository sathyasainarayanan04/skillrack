
package afterauroitech;
import java.util.*;
public class MinimizeMalwareII {
    public static int minMalwareSpread(int[][] graph, int[] initialInfected){
        Arrays.sort(initialInfected);
        int minInfectionCount = Integer.MAX_VALUE;
        int bestNodeToRemove = -1;
        int totalNodes = graph.length;
        for(int nodeToRemove : initialInfected){
            boolean[] isNowInfected = new boolean[totalNodes];
            Queue<Integer> bfsQueue = new LinkedList<>();
            for(int startingInfectedNode : initialInfected){
                if(startingInfectedNode == nodeToRemove){
                    continue;
                }
                bfsQueue.add(startingInfectedNode);
                isNowInfected[startingInfectedNode]=true;
            }
            int currentInfectedCount = 0; 
            while(!bfsQueue.isEmpty()){
                int currentNode = bfsQueue.poll();
                currentInfectedCount++;
                for(int neighbor =0; neighbor < totalNodes ; neighbor++){
                    if(neighbor == nodeToRemove)continue;
                    boolean isConnected = graph[currentNode][neighbor]==1 ? true: false;
                    boolean alreadyInfected = isNowInfected[neighbor];
                    if(isConnected && !alreadyInfected){               
                        isNowInfected[neighbor] = true;
                        bfsQueue.offer(neighbor);
                    }
                }
            }
            if(currentInfectedCount < minInfectionCount){
                minInfectionCount = currentInfectedCount;
                bestNodeToRemove = nodeToRemove;
            }
        }
        if(bestNodeToRemove == -1 && initialInfected.length > 0){
            bestNodeToRemove = initialInfected[0];
        }
        return bestNodeToRemove;
    }
    public static void main(String[] args){
        int[][] graph = {
            {1,1,0,0,0,0},
            {1,1,1,0,0,0},
            {0,1,1,1,0,0},
            {0,0,1,1,0,0},
            {0,0,0,0,1,1},
            {0,0,0,0,1,1}
        };
        int[] initialInfected = {0,3,4};
        int nodeToHeal = minMalwareSpread(graph, initialInfected);
        System.out.println(nodeToHeal);
    }
}
